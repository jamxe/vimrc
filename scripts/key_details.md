#### 基本功能

由于 `<Esc>` 离键盘中心较远，按起来比较费力。因此我映射了 `jk` 和 `kj` 作为 `<Esc>` 的替代。

这样只需要在插入模式（INSERT）中，同时按下 `j` 和 `k` 两个键，就可以快速退出回到普通模式（NORMAL）了。

代价就是在插入模式中如果确实要输入 `jk`，就需要在按下 `j` 后等待一秒，才能让 Vim 认为这是两个独立的按键。

- `jk` / `kj` / `<Esc>` 回到普通模式

请注意，原先 Vim 自带的用于记录宏的 `q` 键位，被我重新映射为退出键。

使用 `q` 保存并退出当前窗口，方便且直观。

很多插件都在自己的子窗口中这样映射 `q` 为关闭窗口，所以我索性把 `q` 作为所有窗口统一的关闭方式了。

对于已经习惯使用 `q` 来记录宏的用户可能难以接受，如需记录宏，请改用大写的 `Q`（Shift+Q）。

- `q` / `:Quit` 保存并退出当前窗口
- `ZQ` / `:q!` 不保存就强制退出当前窗口
- `Q` 记录宏，再按一次停止记录
- `@` 播放宏

`$` 和 `^` 需要按住 Shift 很不爽，因此我提供了更轻松的 `gl` 和 `gh` 作为代替。

- `gl` / `$` 移动到行末尾
- `gh` / `^` 移动到行开头（不包括空格）
- `3gl` / `$2l` 移动到行末尾倒数第 3 个字符
- `3gh` / `^2h` 移动到行开头倒数第 3 个字符
- `gm` 移动到当前行中央位置

您可以自行修改 [`~/.config/nvim/lua/archvim/mappings.lua`](lua/archvim/mappings.lua) 来改变键位，例如：

```lua
-- 讨厌 q 用作退出的“宏孝子”请删除这 3 行：
vim.keymap.set("n", "q", "<cmd>Quit<CR>", { silent = true })
vim.keymap.set("v", "q", "<Esc>", { silent = true })
vim.keymap.set("n", "Q", "q", { silent = true, noremap = true })

-- 讨厌 jk 的“Esc 孝子”请删除这 4 行：
vim.keymap.set("i", "jk", "<Esc>", { silent = true })
vim.keymap.set("i", "kj", "<Esc>", { silent = true })
vim.keymap.set("t", "jk", "<C-\\><C-n>", { silent = true })
vim.keymap.set("t", "kj", "<C-\\><C-n>", { silent = true })
```

> 别误会！小彭老师也是“Vim 宏”的忠实大粉丝啊！只不过关窗口更习惯 `q` 了，用的比宏录制多。

#### 各类功能窗口

以下均为开关额外功能窗口类的键位，按一下就会打开，再按一下可以关闭。

- `<F12>` / `:AerialToggle` 打开大纲
- `<F10>` / `:Neogit` 打开 Git 面板
- `<F9>` / `:Trouble diagnostics toggle` 打开实时语法检查清单
- `<F8>` / `:ToggleTerm` 打开内置终端
- `<F7>` / `:NvimTreeToggle` 打开项目文件树
- `<F6>` / `:Trouble qflist toggle` 打开编译器错误列表
- `<F5>` / `:TermExec cmd=./run.sh` 运行 `./run.sh`，这里面可以放你项目的构建和运行指令
- `<S-F5>` / `:TermExec cmd=\<C-c>` 中断当前在终端中执行的程序（发送 Ctrl+C 的效果）

注意当 `<F5>` 检测到当前项目是一个 CMake 项目，会优先使用 `:CMakeRun`，见下文。

#### CMake 项目支持

以下命令为 `cmake-tools` 的功能，仅当项目根目录检测到 `CMakeLists.txt` 时可用。

> CMake 相关的快捷键都以 `cm` 开头。

- `cmc` / `:CMakeGenerate` 配置当前项目，等价于 `cmake -B build -DCMAKE_EXPORT_COMPILE_COMMANDS=ON`
- `cmb` / `:CMakeBuild` 构建当前项目，等价于 `cmake --build build`

- `<F5>` / `cmr` / `:CMakeRun` 运行当前项目，等价于 `build/<your app>`，第一次运行时会询问要选择哪个可执行目标
- `<S-F5>` / `cms` / `:CMakeStopRunner` 终止运行，杀死当前终端中的正在运行的程序

- `:CMakeSelectBuildDir` 选择构建目录，默认为当前目录下的 `build` 子目录
- `:CMakeSelectBuildType` 选择构建类型：`Release`、`RelWithDebInfo`、`MinSizeRel`、`Debug`
- `:CMakeSelectLaunchTarget` 选择以后要运行的目标

#### 标签页管理 (bufferline.nvim)

- `<F4>` / `:wa` 一键保存所有打开的文件

- `<F3>` / `gt` / `:BufferLineCycleNext` 切换到下一个标签页
- `<F2>` / `gb` / `:BufferLineCyclePrev` 切换到上一个标签页
- `<F1>` / `g<Tab>` / `:BufferLineTogglePin` 将当前标签页固定在最前

- `<S-F3>` / `gT` / `:BufferLineMoveNext` 将当前标签页右移一位
- `<S-F2>` / `gB` / `:BufferLineMovePrev` 将当前标签页左移一位
- `<S-F1>` / `g<BS>` / `:bd` 关闭当前标签页

- `<C-S-F3>` / `g<C-t>` / `:BufferLineCloseRight` 关闭右侧所有标签页
- `<C-S-F2>` / `g<C-b>` / `:BufferLineCloseLeft` 关闭左侧所有标签页
- `<C-S-F1>` / `g<S-Tab>` / `:BufferLineCloseOthers` 关闭除当前标签页外所有

- `g<Space>` / `:BufferLinePick` 选择跳转到一个标签页

#### 窗口间移动

- `<C-w>w` 在各个窗口之间轮流切换
- `<C-w>x` 将当前窗口和下一个轮换窗口交换
- `<C-q>` / `<C-w>q` 关闭当前窗口

- `<C-h>` / `<C-w>h` 移动到当前左侧的窗口
- `<C-j>` / `<C-w>j` 移动到当前下方的窗口
- `<C-k>` / `<C-w>k` 移动到当前上方的窗口
- `<C-l>` / `<C-w>l` 移动到当前右侧的窗口

- `<M-h>` / `<C-w>H` 将当前窗口向左移动
- `<M-j>` / `<C-w>J` 将当前窗口向下移动
- `<M-k>` / `<C-w>K` 将当前窗口向上移动
- `<M-l>` / `<C-w>L` 将当前窗口向右移动

- `<M-s>` / `<C-w>s` 横向切割当前窗口，变为上下两个
- `<M-v>` / `<C-w>v` 纵向切割当前窗口，变为左右两个

- `<M-=>` / `<C-w>+` 将当前窗口高度增加 1 格
- `<M-->` / `<C-w>-` 将当前窗口高度减少 1 格
- `<M-.>` / `<C-w>>` 将当前窗口宽度增加 1 格
- `<M-,>` / `<C-w><Lt>` 将当前窗口宽度减少 1 格

#### 语言支持 (LSP)

和语言有关的快捷键均为 `g` 开头，在普通模式（NORMAL）中使用。

虽然 LSP 是 NeoVim 原生支持的，无需任何插件；但 LSP 只是个协议，还是需要安装相应的 LSP 服务器如 `clangd` 或 `pyright` 才能识别对应的语言。

我的一键安装脚本应该已经为你自动安装了 `clangd` 和 `pyright`，可以运行 `clangd --version` 来检查，如果没有 `clangd` 则无法在 C++ 文件中实现以下这些功能。

- `gd` 跳转到当前光标下函数、变量、或类的定义。
- `gD` 跳转到当前光标下函数、变量、或类的声明。

如果光标悬浮在 `#include <cstdio>` 上使用 `gd`，则会打开并跳转到 `cstdio` 这个头文件中，对于 Python 的 `import package` 和 Lua 的 `require('package')` 也同样会跳转到模块对应的文件。

- `gy` 跳转到当前光标下变量的类型的定义，与 `gd` 类似，但跳转到变量类型的定义，而不是变量本身的定义，例如 `std::vector<int> arr`，则光标悬停在 `arr` 上 `gy` 时，会跳转到其类型 `std::vector` 的定义。
- `gr` 跳转到当前光标下函数、变量、或类的所有引用，也就是查找谁使用了当前这个函数或变量。会弹出一个列表，让你用 `j/k` 移动选择，按 `<CR>` 即可跳转到选中的那个引用所在的文件。
- `gR` 跳转到当前光标下函数的所有实现，也就是查找当前虚函数的所有 override。如果有多个实现，则会弹出一个列表，让你用 `j/k` 移动选择，按 `<CR>` 即可跳转到选中的那个实现。
- `gz` 查看所有（定义、引用、类型定义、声明）

小贴士：使用 `gd` 跳转过去后，如果想要回来，只需要按 `<C-o>`（Ctrl+O）就能恢复到原来编辑的文件和位置，非常方便。

如果连续跳转了多次，也可以通过多次按 `<C-o>` 逐级退回原来的位置。

- `<C-o>` / `<S-Tab>`（普通模式下）回退到上一次跳转的位置。
- `<C-i>` / `<Tab>`（普通模式下）取消回退，前进到下一次跳转的位置。

您可以自行修改 [`~/.config/nvim/lua/archvim/config/lspconfig.lua`](lua/archvim/config/lspconfig.lua) 来添加不同语言的支持及其配置。

- `gf` 打开光标下的文件名，创建一个新新标签页并跳转过去
- `gF` 打开光标下的文件名，与 `gf` 类似，但是 `gF` 检测到形如 `file.cpp:12` 的格式时，会跳转到相应的行号
- `gx` 打开光标下的超链接，如果不是超链接而是普通文件名，则会用系统默认应用程序打开文件

- `gn` 重命名当前光标下的函数、变量、或类，在文本框中输入新的名称即可。
- `gN` / `:IncRename` 类似，但不会自动带上初始名称。

- `go` / `:Ouroboros` 快速在头文件和源文件之间来回跳转，非常实用，C/C++ 开发者必备功能
- `gO` / `:split | Ouroboros` 打开对应的头文件或源文件，上下分割呈两个窗口，同时显示
- `g<C-o>` / `:vsplit | Ouroboros` 打开对应的头文件或源文件，左右分割呈两个窗口，同时显示

如果对应的 `.cpp` 或 `.h` 文件不存在，还会提示你自动创建。

- `gw` 应用 Code Actions 尝试自动修复当前行存在的问题

例如在一个“标识符未定义”的静态分析报错上方，运行 `gw`，可以自动导入缺少的头文件。

- `gcc` 注释/取消注释当前选中的代码/行
- `g=` / `:Neoformat` 格式化当前文件或选中的区间
- `<S-F4>` / `:lua vim.lsp.buf.format()` 格式化当前整个文件

注意 `:Neoformat` 实际上是调用了 `clang-format` 或 `pylint` 等语言特定工具，我的一键脚本已经替你自动安装了 `clang-format`。

不过默认的 `clang-format` 风格非常糟糕，居然是 Tab 缩进为 2 的。好在我的一键安装脚本默认会为你安装了一个全局的 [`~/.clang-format`](dotfiles/.clang-format)，Tab 缩进为 4，适合大多数人 C++ 风格需求。若不满意可以自行修改，或采用项目目录下的局域 `.clang-format` 来覆盖。

如果有自定义的代码规范需求，可以在当前项目目录下创建一个 [`.clang-format` 配置文件](https://clang.llvm.org/docs/ClangFormatStyleOptions.html) 来调整，满足撕人老板的要求。

- `K` 查看当前光标下函数、变量、或类的函数签名信息，会弹出一个小窗口来显示；如果该函数或类的定义上方有注释，则注释内容会被视为文档一并显示在小窗中
- `gK` 快速预览当前光标下函数所需参数的提示，会弹出一个小窗口，不显示完整文档

函数或类的定义位置、来自哪个头文件也会显示出来。

- `:PyrightOrganizeImports` 为当前代码中的所有 `import` 排序，暂时仅支持 Python

#### 语法块选择 (nvim-treesitter)

在普通模式（NORMAL）中使用 `v{i,a}<textobject>` 选择指定大小的语法块，进入可视模式（VISUAL），便于为后续修改指定范围。

- `vac` 选中当前类
- `vic` 选中当前类体内
- `vaf` 选中当前函数
- `vif` 选中当前函数体
- `vab` 选中当前块
- `vib` 选中当前块中内容
- `vad` 选中当前分支
- `vid` 选中当前分支块或条件
- `vae` 选中当前循环
- `vie` 选中当前循环体
- `vai` 选中当前函数调用语句
- `vii` 选中当前函数调用语句的参数列表
- `vap` 选中当前参数（包括空格和逗号）
- `vip` 选中当前参数（不包括空格和逗号）
- `vah` 选中当前赋值语句
- `vih` 选中当前赋值语句中的左侧值
- `var` 选中当前返回语句
- `vir` 选中当前返回语句返回值
- `vin` 选中当前数字
- `vat` 选中当前注释块

用法与 Vim 内置的 `viw`、`vaw` 等类似。

以上所有 `v{i,a}<textobject>` 均支持以 `{y,d,c}{i,a}<textobject>` 形式出现，例如 `vafc` 可以简写为 `caf`。先进入可视模式（VISUAL）只是为了对修改的范围看的更清楚，并保留后悔或修改的余地。

例如：`vifc` 或 `cif` 可以重写当前函数的函数体；`vafgcc` 或 `gcaf` 注释掉当前整个当前函数；`vihc` 或 `dic` 删除当前函数调用语句的参数列表；`viny` 或 `yin` 拷贝当前最近的一个数字的值到剪贴板；`vacg=` 格式化当前整个类。

以下两个键位可用于虚拟模式（VISUAL）中，快速扩大当前选中区间到下一个更大的语法块，或缩小回退到更小的一块。

- `+` 扩大选择块
- `-` 缩小选择块

其中 `+` 在普通模式（NORMAL）也可用，会选中当前光标下的最子语句块。

例如：

```cpp
int main() {
    return 42;
}
```

光标在 `42` 上方按 `+`，会选中 `42`。

继续按 `+`，会选中 `return 42`，继续按，直至选中整个 `main` 函数。

适用场景：如果你不喜欢 `viw` 或 `vaf` 之类一次性完成的选择，可以多次按 `+` 和 `-` 调整，渐进地选出想要的范围。

#### 语法块跳转 (nvim-treesitter)

- `]c` 下一个类开头
- `[c` 上一个类开头
- `]C` 下一个类结尾
- `[C` 上一个类结尾

- `]f` 下一个函数开头
- `[f` 上一个函数开头
- `]F` 下一个函数结尾
- `[F` 上一个函数结尾

- `]b` 下一个块开头
- `[b` 上一个块开头
- `]B` 下一个块结尾
- `[B` 上一个块结尾

- `]d` 下一个分支开头
- `[d` 上一个分支开头
- `]D` 下一个分支结尾
- `[D` 上一个分支结尾

- `]e` 下一个循环开头
- `[e` 上一个循环开头
- `]E` 下一个循环结尾
- `[E` 上一个循环结尾

- `]i` 下一个函数调用开头
- `[i` 上一个函数调用开头
- `]I` 下一个函数调用结尾
- `[I` 上一个函数调用结尾

- `]p` 下一个参数开头
- `[p` 上一个参数开头
- `]P` 下一个参数结尾
- `[P` 上一个参数结尾

- `]h` 下一个赋值语句开头
- `[h` 上一个赋值语句开头
- `]H` 下一个赋值语句结尾
- `[H` 上一个赋值语句结尾

- `]r` 下一个返回语句开头
- `[r` 上一个返回语句开头
- `]R` 下一个返回语句结尾
- `[R` 上一个返回语句结尾

- `]n` 下一个数字开头
- `[n` 上一个数字开头
- `]N` 下一个数字结尾
- `[N` 上一个数字结尾

- `]t` 下一个注释块开头
- `[t` 上一个注释块开头
- `]T` 下一个注释块结尾
- `[T` 上一个注释块结尾

- `<Space>` 全屏任意移动

#### 定义预览 (LSP)

语法树变换类的快捷键都以 `gs` 开头。

- `gsc` 在小窗口中预览当前光标下类或变量的定义（但不跳转过去）
- `gsf` 在小窗口中预览当前光标下函数的定义（但不跳转过去）
- `gsd` 在小窗口中预览当前光标下存在的静态检查语法错误

- `gss` 在弹出窗口中预览当前项目中的所有静态检查语法错误
- `gsl` 在弹出窗口中预览当前项目中的所有编译器报错
- `gso` 打开/关闭大纲视图
- `gsg` 打开/关闭 Git 控制面板
- `gsp` 打开/关闭项目文件树

**内置终端**

- `<F8>` 或 `<C-t>`
- `gsi` 开启/关闭 Inlay Hint 功能

#### 语法树换位 (nvim-treesitter)

语法树换位的快捷键都以 `m` 开头。

- `mh` / `map` 尝试左移当前的参数
- `ml` / `mip` 尝试左移当前的参数
- `mj` / `mah` 尝试下移当前的语句
- `mk` / `mih` 尝试上移当前的语句
- `maf` 尝试下移当前的整个函数
- `mif` 尝试上移当前的整个函数
- `mac` 尝试下移当前的整个类
- `mic` 尝试上移当前的整个类

```cpp
func("hello", 42, Some());
```

光标悬停在 `42` 上时按下 `ml`，则得到：

```cpp
func(42, "hello", Some());
```

用于快速调整参数的顺序，非常有用。

当你看的不顺眼时，`maf` 和 `mif` 也可以用于调整多个函数之间的上下顺序。

所有这些都支持数字修饰，例如 `3mk` 将当前语句向上移动三格。

#### 全局搜索功能 (telescope.nvim)

用于搜索并跳转到想要的位置，此类快捷键均以 `,` 开头。

弹出搜索窗口后，按 `<Up>` `<Down>` 可以定位，`<CR>` 跳转，鼠标双击亦可。

搜索窗口的输入文本框初始为插入模式，此时直接按键即可输入你要查询的文本。

插入模式中按一下 `<Esc>` 会退回到普通模式，普通模式中按 `j` `k` 来定位查询结果，按 `ciw` 修改一个单词，按 `i` 回到输入模式。

连按两下 `<Esc>`，即可关闭搜索窗口。

注意：对于文件搜索，`.gitignore` 和 `.rgignore` 中指定的文件将被排除。这是为了避免不小心定位到无聊的二进制文件，例如 `build` 目录中的垃圾文件。

**文件搜索**

- `,l` 按文件名搜索当前项目中的所有文件：朴实无华的全局定位功能，按名字搜索所有项目中的文件，伟大无需多言
- `,b` 列出当前 NeoVim 已打开的文件，即所有标签页：当你打开了特别多标签页找不到头时，就需要用到这个
- `,o` 所有最近打开过的历史文件：最近用过的文件会排在最前，用 `j/k` 就能快速跳转过去，因为你下一个想要打开的大概率是历史记录里有的文件，非常方便，小彭老师平时启动 NeoVim 的第一件事就是 `,o`，打开上次编辑的文件，唯一的缺点是有时会留存了非当前项目的历史记录干扰

- `,L` 按文件名搜索当前项目中的所有 `.c/.cpp` 源文件和 `.h/.hpp` 头文件，智能根据你的 CMake 配置
- `,O` 按文件名搜索当前项目中的所有 `CMakeLists.txt` 和 `.cmake` 文件，智能根据你的 CMake 配置
- `,i` 按文件名搜索当前项目中的所有已被纳入 Git 仓库的文件，`.gitignore` 中的文件将被排除，相当于 `git add` 的历史
- `,p` 按文件名搜索当前项目中的所有 Git 仓库中未提交的修改文件，相当于 `git status` 的输出：因为经常需要在最近修改过的几个文件之间快速跳转，而常用文件往往就是当前 commit 中修改了的文件，比较实用

**字符串搜索**

- `,k` 按正则表达式全局搜索所有文件中的字符串：用于跨文件跳转，很常用，可以在不方便用 `gd` 和 `gr` 时提供兜底的按文本搜索
- `,.` 模糊搜索当前打开文件中的字符串：用于单个文件内的跳转，虽然 Vim 自带的 `/` 搜索也能提供相似的单文件搜索功能，但 `,.` 的好处是以列表的形式展现，方便统一查看很多个匹配结果，而且模糊匹配不要求严格符合
- `,z` 当前文件中的所有文本对象，需要 `:TSInstall cpp` 安装当前语言的语法解析树支持，一键安装脚本已替你安装
- `,x` 当前文件中的所有符号，需要 `:MasonInstall clangd` 安装当前语言的 LSP 支持，一键安装脚本已替你安装

例如 `,k` 后输入 `TODO` 就能快速找到所有你标记过 `TODO` 注释的地方。

**跳转位置搜索**

- `,m` 查看当前 Vim 的所有标记：可以用 `mx` 来创建一个名为 “x” 的标记，用 `'x` 来跳转到他，而 `,m` 可以快速列出所有你设置过的标记，按 `<CR>` 即可跳转到选中的标记
- `,j` 查看当前 Vim 的跳转历史，这里记录着你所有曾经跳转过的地方，选择后按 `<CR>` 就能再次跳转过去……实际上这就是 `<C-o>` 和 `<C-i>` 使用的那个跳转列表

**其他特色功能**

- `,c` 查看当前 Git 仓库的全部提交历史，相当于 `git log` 输出的列表，可以按 commit 的编号或标题搜索
- `,v` 查看当前 Git 仓库的所有分支，相当于 `git branch` 输出的列表，按 `<CR>` 即可切换到选中的分支
- `,:` 模糊查询 NeoVim 中用 `:` 输入过的命令历史，按 `<CR>` 可以再次执行该命令
- `,/` 模糊查询 NeoVim 中用 `/` 搜索过的文本历史，按 `<CR>` 可以再次搜索该字符串
- `,;` 模糊查询所有 NeoVim 命令，帮助你学习 NeoVim
- `,?` 模糊查询 NeoVim 官方及其插件的所有帮助文档，帮助你学习 NeoVim

- `,a` 查询当前文件中的所有 Diagnostics
- `,q` 查询当前项目的完整 QuickFix 列表
- `,,` 多功能模糊查找，可以自选想要查找的类型和内容

以上设置均可以在 [`~/.config/nvim/lua/archvim/telescope.lua`](lua/archvim/telescope.lua) 中修改。

#### 编译错误列表 (QuickFix)

QuickFix 是 Vim 和 NeoVim 内置的功能，用于捕获编译器产生的错误文件名和行号信息，`<CR>` 或者双击可以快速跳转到错误的位置，方便你修改。

每次运行过 `<F5>` 或 `:CMakeBuild` 后，如果产生了编译错误，就会弹出 QuickFix 窗口。

可以通过以下两个快捷键定位到编译错误所在的位置：

- `:cnext` 跳转到下一个编译错误所对应的文件和行号
- `:cprev` 跳转到上一个编译错误所对应的文件和行号

当 QuickFix 窗口还没有打开时，可以按 `<F6>` 唤出。

在 QuickFix 窗口中，按 `<Esc>` 或再按 `<F6>` 可以关闭 QuickFix。

#### 文件树 (nvim-tree)

- `<F7>` 打开/关闭文件树

打开文件树时，会自动尝试定位到到当前正在编辑的文件，非常方便。

以下键位映射仅限于文件树窗口内部生效。

- `j` 移动到下一个文件
- `k` 移动到上一个文件
- `<` 移动到当前同目录下的下一个文件
- `>` 移动到当前同目录下的上一个文件
- `]c` 移动到下一个 Git 有修改的文件，根据 `git status`
- `[c` 移动到上一个 Git 有修改的文件，根据 `git status`
- `]d` 移动到下一个有静态检查报错的文件，根据 `clangd`
- `[d` 移动到上一个有静态检查报错的文件，根据 `clangd`

- `o` / `<CR>` 打开光标下的文件，或展开文件夹，再按一次可以重新折叠起文件夹
- `<C-v>` 打开光标下的文件，但会左右分割成两个窗口，左侧是新打开的文件
- `<C-x>` 打开光标下的文件，但会上下分割成两个窗口，上方是新打开的文件
- `<C-e>` 就地打开光标下的文件，会直接顶替掉文件树窗口
- `<Tab>` 打开光标下的文件，但光标依然保留在文件树中不动
- `<C-k>` 查看文件大小、修改日期、属性等信息

这里面最常用的就是 `<CR>`，鼠标双击也可以打开文件或展开文件夹。

- `a` 创建一个新文件，会弹出窗口询问新文件名，输入的文件名以 `/` 结尾则可以创建文件夹，否则创建普通文件
- `d` 删除光标下的文件（需要按 y 确认，按任意键取消）
- `D` 将光标下的文件移动到垃圾桶

- `c` 复制当前光标下的文件，放到剪切板（类似于 Ctrl-C）
- `x` 剪切当前光标下的文件，放到剪切板（类似于 Ctrl-X）
- `p` 将剪切板中的文件粘贴（类似于 Ctrl-V）

> 如果之前是 `x` 剪切的，那么 `p` 粘贴后原来文件会消失，只保留新文件；如果之前是 `c` 拷贝的，那么 `p` 粘贴后，原来的文件依然在那里，新老文件同时存在。

运用 `x` 和 `p`，可以在不同的文件夹之间移动文件。

- `r` 重命名当前文件或文件夹，会弹出一个编辑框让你编辑新文件名
- `<C-r>` 重命名当前文件或文件夹，会弹出一个编辑框让你编辑新文件名，但原来的文件名不自动填入，允许你自己从零开始写出整个文件名
- `e` 重命名当前文件，但不改变后缀名，例如 `hello.lua` 则只会修改 `hello` 的部分
- `u` 重命名当前文件或文件夹，包括完整的绝对路径，从而可以在不同文件夹之间移动

- `y` 拷贝当前文件名
- `Y`（Shift+Y）拷贝当前文件相对于项目根目录的相对路径
- `gy` 拷贝当前文件的绝对路径
- `ge` 拷贝当前文件名，但不包括扩展名

常用于拷贝文件路径后粘贴到终端访问。

- `.` 对光标下的文件执行任意 Vim 命令
- `s` 用系统默认应用程序打开光标下的文件（类似于 `gx` 快捷键）

- `<BS>` 关闭展开的文件夹
- `E` 递归展开当前光标下的文件夹，及其中的所有子文件夹
- `W` 递归折叠当前光标下的文件夹

- `<C-]>` 将光标下的文件夹设为工作目录（类似于 `cd` 命令）
- `-` 工作目录回退到上一层目录（类似于 `cd ..` 的效果）

- `m` 添加书签标记
- `bmv` 移动书签标记的文件到此处
- `bd` 删除书签标记的文件
- `bt` 移动书签标记的文件到垃圾桶
- `g?` 查看快捷键帮助

#### 括号编辑 (nvim-surround)

可视（VISUAL）模式中：

- `s)` 给当前选中内容包上 `(选中内容)` 括号
- `s}` 给当前选中内容包上 `{选中内容}` 括号
- `s]` 给当前选中内容包上 `[选中内容]` 括号
- `s>` 给当前选中内容包上 `<选中内容>` 尖括号
- `s'` 给当前选中内容包上 `'选中内容'` 单引号
- `s"` 给当前选中内容包上 `"选中内容"` 双引号
- `stspan` 给当前选中内容包上 `<span>选中内容</span>` 标签
- `sta href="b.html"` 给当前选中内容包上 `<a href="b.html">选中内容</a>` 标签

普通（NORMAL）模式中：

- `ysi<range><brace>` 添加括号
- `cs<oldbrace><newbrace>` 改变括号
- `ds<brace>` 删除括号

例如光标停在 `world` 上：

```cpp
hello world
```

按下 `viws"` 或 `ysiw"`

```cpp
hello "world"
```

按下 `cs")`

```cpp
hello (world)
```

按下 `ds)`



<!--
欢迎使用小彭老师 NeoVim 插件整合包！内含代码补全，CMake项目管理，智能语法高亮，文本对象选择等。

无需任何准备，只需一行命令即可安装！

一键安装命令（推荐）：curl -sSLf https://142857.red/files/nvimrc-install.sh | bash

复制粘贴这条到你的终端，就开始安装啦！

（下载这个sh文件后执行亦可）

安装失败？遇到问题？请向我反馈：https://github.com/archibate/vimrc/issues

❥ 更多功能仍在开发中……

此处简要介绍本插件整合包额外增加的键位。

❥ 基本

jk / kj / <Esc> 回到普通模式

q / :wq / ZZ 保存并退出

Q 记录宏

gl / $ 移动到行末尾

gh / ^ 移动到行开头（不包括空格）

3gl / $2l 移动到行末尾倒数第 3 个字符

3gh / ^2h 移动到行开头倒数第 3 个字符

❥ 跳转

gd 跳转到定义

gD 跳转到声明

gy 跳转到变量类型的定义

gY 跳转到虚函数实现

go 头文件和源文件来回跳转

gr 寻找符号引用

gz 罗列所有相关信息（定义、引用等）

gf 打开光标下的文件名

gF 打开光标下的文件名并跳到右侧指定的行号

gx 打开光标下的网页链接

<C-o> 跳转回来

❥ 重构

gcc 注释/取消注释当前选中的代码/行

gn 重命名变量

gw 尝试自动修复问题

g= 自动格式化当前代码

❥ 预览

K 悬浮窗查看文档

gsf 预览函数定义

gsc 预览类定义

gsd 预览语法错误

❥ 开关

gso 打开大纲

gsg 打开 Git 面板

gsp 打开项目文件树

gss 查看所有静态语法错误

gsl 查看所有编译器报错

gsi 开关 Inlay Hint

<F8> 或 <C-t> 打开/关闭终端

❥ 标签页

<F4> 一键保存所有打开的文件

<F3> 切换到下一个标签页

<F2> 切换到上一个标签页

<F1> 将当前标签页固定在最前

<S-F3> 将当前标签页右移一位

<S-F2> 将当前标签页左移一位

<S-F1> 关闭当前标签页

<C-S-F3> 关闭右侧所有标签页

<C-S-F2>关闭左侧所有标签页

<C-S-F1> 关闭除当前标签页外所有

g<Space> 选择跳转到一个标签页

❥ 文本查找

,. 当前文件中模糊查找

,k 当前项目中正则表达式查找

,l 当前项目中的所有文件

,b 当前 Vim 已打开文件

,o 最近打开过的历史文件

,i 当前所有加入 Git 仓库的文件

,p 当前 Git 有未提交修改的文件

,c 所有 Git 提交历史

,v 所有 Git 分支

❥ 选择

vac 选中当前类

vic 选中当前类体内

vaf 选中当前函数

vif 选中当前函数体

vab 选中当前块

vib 选中当前块中内容

vai 选中当前函数调用语句

vii 选中当前函数调用语句的参数列表

vap 选中当前参数（包括逗号）

vip 选中当前参数（不包括逗号）

vin 选中当前数字

vat 选中当前注释块

+ 扩大选择

- 缩小选择

举一反三：dat 删除当前注释块，cip 修改当前参数

❥ 移动

]c 下一个类开头

[c 上一个类开头

]C 下一个类结尾

[C 上一个类结尾

]f 下一个函数开头

[f 上一个函数开头

]F 下一个函数结尾

[F 上一个函数结尾

...以此类推，所有英文字母同上“选择”所述...

<Space> 全屏任意移动

❥ 换位

mh 左移参数

ml 右移参数

mj 下移当前语句

mk 上移当前语句

maf 下移当前函数

mif 上移当前函数

mac 下移当前类

mic 上移当前类

❥ 括号

可视模式中：

s) 给当前选中内容包上 () 括号

s} 给当前选中内容包上 {} 括号

s] 给当前选中内容包上 [] 括号

s> 给当前选中内容包上 <> 尖括号

s' 给当前选中内容包上 '' 单引号

s" 给当前选中内容包上 "" 双引号

stspan 给当前选中内容包上&lt;span&gt;标签

sta href="b.html" 给当前选中内容包上&lt;a href="b.html"&gt;标签

普通（NORMAL）模式中：

ysi<range><brace> 添加括号

cs<oldbrace><newbrace> 改变括号

ds<brace> 删除括号

❥ CMake

cmc 或 :CMakeGenerate 配置当前项目

cmb 或 :CMakeBuild 构建当前项目

cmr 或 :CMakeRun 运行当前项目

cms 或 :CMakeStopRunner 杀死当前终端中的正在运行的程序

❥ 文件树

y 拷贝

x 剪切

d 删除

p 粘贴

a 创建 创建文件
-->
